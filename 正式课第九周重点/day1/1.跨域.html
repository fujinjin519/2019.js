<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <!--
       1. 跨域：涉及到同源和非同源（一般的请求不涉及到跨域，一个项目没有跨域，一个项目部署到一个端口号下，不会发生跨域）
       例如：官网项目：8000端口号
            管理系统：9000  
            项目的工作场景：从9000端口号访问800端口的后台就是跨域
            确定跨域看它是不是同源
            一个网址代表:
            同源： http协议  域名  端口号 前三个必须一样就是同源，
            非同源：只要有一个不一样就是非同源 
            ajax是同源的，不能进行非同源的请求
            script的 src是非同源的，可以从一个项目访问另一个项目，当数据成功返回成功之后，会默认调用跨域地址后面的(callback)的回调函数。jsonp.  只能发送get 请求
          



     -->
                                           
    <script>
        // function fn(data){
        //     //data接收到了后端的数据

        // }
        // $.ajax({
        //     url:"user/login",
        //     dataType:"jsonp",
        //     success:function(data){

        //     }

        // })
        function jsonp(){
          
            return new Promise(function(resolve,reject){
                window[options.cb]=function(data){
                    resolve(data);
                    document.body.removeChild(script)
                
            }
              let script=document.createElement("script")
                let str=`${options.url}`;
                for(let key in options.params){
                    str+=key+"="+options.params[key]+"&"

                }
                str=str.substring(0,str.length-1)
                str+="callback="+options.cb;
                script.src=str;
                document.body.appendChild(script)

             })

        }
        jsonp({url:"",params:{user:112233},cb="fn"}).then(function(data){
             //data成功获取的数据

        })


        
    
    
    </script>
    
</body>
</html>